# 강의 정리 🚀
___

> 2021.08.09 데이터베이스 시스템 소개

## 공부한 내용

- ### 수업에 앞서 ###
    - 지금 배우는 과정을 즐겨야 함.
    - 내가 뭘 모르는지 끊임없이 물어보자.
        - 아는 것과 모르는 것을 구분할 필요가 있다.
    - 잘 하는 사람보고 기죽지 않기
    
    - RDBMS(프로덕션 관계형 데이터베이스)
        - 어떠한 서비스의 운영에 필요한 데이터를 저장하는 곳
        - 처리속도에 중점
        - 데이터를 구조화한 테이블들의 집합으로 구성
    - 데이터 웨어하우스
        - 구조화된 큰 데이터를 처리하는 것이 중요
        - 데이터를 분석하여 의사 결정과 서비스 최적화에 사용

    - 데이터베이스의 종류
        - *** 관계형 데이터베이스 (RDBMS, 데이터 웨어하우스용 관계형 데이터베이스) *** 
            - 프로덕션 데이터베이스 : Mysql, PostgreSQL
                - OLTP(OnLine Transaction Processing)
                - 빠른 속도에 치중, 서비스에 필요한 정보 저장
            
            - 데이터 웨어하우스 : Redshift, Snowflake
                - OLAP(OnLine Analytical Processing)
                - 처리 데이터 크기에 집중, 데이터 분석 혹은 모델 빌딩등을 위한 데이터 저장
        - 비관계형 데이터베이스 (NoSQL 데이터베이스 보통, RDBMS 보완하기 위해 사용)
        

- ### 관계형 데이터베이스 소개 ###
    - 관계형 데이터베이스 
        - 구조화된 데이터를 저장하고 지르이할 수 있도록 해주는 스토리지
        - 관계형 데이터베이스를 조작하는 프로그래밍 언어가 SQL이다.

    - *** 관계형 데이터베이스의 구조 ***
        - 2단계로 구성됨
            1. 가장 밑단에는 테이블들이 존재
            2. 테이블들은 데이터베이스 or 스키마라는 폴더 밑으로 구성
        - 테이블의 구조 (테이블 스키마라고 부르기도 한다)
            1. 레코드(행) : 하나 이상의 필드로 구성된다.
            2. 필드(컬럼)
            3. 필드는 이름,타입,속성(PK)로 구성된다.

- ### SQL 소개 ###
    - SQL(Structured Query Language)
        - 관계형 데이터베이스에 있는 테이블을 질의하거나 조작해주는 언어

        1. *** DDL *** 
            - 테이블의 구조를 정의하는 언어
        2. *** DML ***
            - 테이블에서 원하는 레코드들을 읽어오는 질의언어
            - 테이블의 레코드에 수정을 하는데 사용하는 언어

    - SQL의 단점
        - 구조화된 데이터를 다루는데 최적화가 되어있다.
            - 비구조화된 데이터를 다루는데는 제약이 있다.
        - nested되어있는 구조는 지원하지 않는다.
        - 비구조화된 데이터를 다루는데 Spark, Hadoop과 같은 분산 컴퓨팅 환경이 필요해졌다.
        - 관계형 데이터베이스마다 SQL 문법이 조금씩 상이하다.

    - *** Star schema ***
        - Production DB용 관계형 데이터베이스에서는 보통 스타 스키마를 사용해 데이터를 저장한다.
        - 논리적 단위로 저장 및 필요시 조인을 이용한다.
        - 스토리지의 낭비가 적으며 업데이트가 쉽다.

    - Denormalized schema
        - NoSQL이나 데이터 웨어하우스에서 사용하는 방식이다.
            - 단위 테이블로 나누지 않으므로 별도의 조인이 필요없는 방식이다.
        - 스토리지의 낭비가 보다 크지만, 조인을 사용하지 않으므로 빠른 계산이 가능하다.

- ### SQL 문법 ###
    - SQL 기본
        - 세미콜론으로 구분.
        - 주석 : -- 혹은 /*--*/ 사용
        - 테이블/필드이름의 명명규칙을 정하는 것이 중요
    
    - *** SQL DDL ***
        - CREATE TABLE
            - Primary Key 속성을 지정할 수 있다.
                - Primary Key Uniqueness : 유일키 보장
            - 성능 향상을 위해 인덱스를 지정할 수 있다.
            ```sql
            CREATE TABLE raw_data.user_session_channel (
            userid int,
            sessionid varchar(32) primary key,
            channel varchar(32)
            );
            ```

        - DROP TABLE
            - 없는 테이블을 삭제하려 할경우 에러가 발생한다.
            - 그러므로 IF EXISTS 문법 이용한다.
            - DELETE FROM은 조건에 맞는 레코드를 지운다.(테이블 자체는 존재)

        - ALTER TABLE
            - 컬럼 추가 : ALTER TABLE [테이블이름] ADD COLUMN [필드이름][필드타입];
            - 컬럼 이름 변경 : ALTER TABLE [테이블이름] RENAME [현재필드이름] TO [새필드이름];
            - 기존 컬럼 제거 : ALTER TABLE [테이블이름] DROP COLUMN [필드이름];
            - 테이블 이름 변경: ALTER TABLE [현재테이블이름] RENAME TO [새테이블이름];

    - *** SQL DML ***
        - SELECT
            - SELECT FROM : 테이블에서 레코드와 필드를 읽어오는데 사용
            - WHERE : 레코드 선택 조건을 지정
            - GROUP BY : 그룹 레벨에서 정보를 뽑는데 사용
            - ORDER BY : 레코드 순서를 결정
        - 레코드 추가 : INSERT INTO
        - 레코드 수정 : UPDATE FROM
        - 레코드 삭제 : DELETE FROM  / TRUNCATE
            - DELETE FROM은 조건을 사용할 수 있지만, TRUNCATE는 조건을 사용할 수 없다.

